{"result":{"history_size":1,"folders":["hw2","hw2∕jabbamaps"],"nr":264,"data":{"embed_links":[]},"created":"2025-01-04T17:05:48Z","bucket_order":3,"no_answer_followup":0,"change_log":[{"anon":"no","uid":"m23al02i88m4tk","data":"m5ifqm2jqkl5r0","v":"all","type":"create","when":"2025-01-04T17:05:48Z"},{"anon":"no","uid":"llz2dt5jij45lu","data":"m5inkurwjw55rz","to":"m5ifqm2bk8u5qz","type":"i_answer","when":"2025-01-04T20:45:17Z"},{"anon":"no","uid":"m23al02i88m4tk","to":"m5ifqm2bk8u5qz","type":"followup","when":"2025-01-04T20:48:29Z","cid":"m5inozjzsy32db"},{"anon":"no","uid":"llz2dt5jij45lu","to":"m5ifqm2bk8u5qz","type":"feedback","when":"2025-01-04T21:09:45Z","cid":"m5iogc06r4r5at"},{"anon":"no","uid":"ln71y5aw8yv4sw","to":"m5ifqm2bk8u5qz","type":"feedback","when":"2025-01-04T21:10:03Z","cid":"m5iogprtbof5nb"},{"anon":"no","uid":"m23al02i88m4tk","to":"m5ifqm2bk8u5qz","type":"feedback","when":"2025-01-04T21:12:12Z","cid":"m5iojguxitb2bg"},{"anon":"no","uid":"llz2dt5jij45lu","to":"m5ifqm2bk8u5qz","type":"feedback","when":"2025-01-04T21:52:05Z","cid":"m5ipyrvl9si49l"}],"bucket_name":"Today","history":[{"anon":"no","uid":"m23al02i88m4tk","subject":"Strncpy compiler error...","created":"2025-01-04T17:05:48Z","content":"<p>Όταν προσπαθώ να κάνω compile το jabbamaps σε σύστημα του εργαστηρίου, λαμβάνω το παρακάτω error, το οποίο φαίνεται να προκαλεί η χρήση της συνάρτησης strncpy 2 φορές μέσα στο πρόγραμμά μου.</p>\n<pre>\nIn file included from /usr/include/string.h:495,\n                 from jabbamaps.c:3:\nIn function &#39;strncpy&#39;,\n    inlined from &#39;add_to_mylist&#39; at jabbamaps.c:22:5,\n    inlined from &#39;main&#39; at jabbamaps.c:280:12:\n/usr/include/bits/string_fortified.h:106:10: error: &#39;__builtin_strncpy&#39; output may be truncated copying 63 bytes from a string of length 63 [-Werror=stringop-truncation]\n  106 |   return __builtin___strncpy_chk (__dest, __src, __len, __bos (__dest));\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn function &#39;strncpy&#39;,\n    inlined from &#39;add_to_mylist&#39; at jabbamaps.c:23:5,\n    inlined from &#39;main&#39; at jabbamaps.c:280:12:\n/usr/include/bits/string_fortified.h:106:10: error: &#39;__builtin_strncpy&#39; output may be truncated copying 63 bytes from a string of length 63 [-Werror=stringop-truncation]\n  106 |   return __builtin___strncpy_chk (__dest, __src, __len, __bos (__dest));\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\ncc1: all warnings being treated as errors</pre>\n<p>Το code που δημιουργεί το πρόβλημά μου φαίνεται να είναι αυτό:</p>\n<pre>\nchar str1[64];\nchar str2[64];\n\nstrncpy(str1, example_str, 63);\nstrncpy(str2, example_str, 63);\nstr1[63] = &#39;\\0&#39;; // making sure of null byte at the end\nstr2[63] = &#39;\\0&#39;;</pre>\n<p><br />Δεν καταλαβαίνω πιο είναι το λάθος, νιώθω ότι ο compiler μου την λέει για το intended use του προγράμματός μου :&lt;</p>"}],"type":"question","anon_map":{},"tags":["hw2","hw2∕jabbamaps","student"],"tag_good":[],"unique_views":78,"children":[{"history_size":1,"folders":[],"data":{"embed_links":[]},"created":"2025-01-04T20:45:17Z","bucket_order":3,"tag_endorse":[],"bucket_name":"Today","history":[{"anon":"no","uid":"llz2dt5jij45lu","subject":"","created":"2025-01-04T20:45:17Z","content":"<p>Ενδιαφέρον, σε ποιο σύστημα του εργαστηρίου στο βγάζει αυτό; Προσπάθησα σε 1-2 με το snippet που είχες παραπάνω αλλά δεν φαίνεται να βγάζει σφάλμα.</p>\n<p></p>\n<pre>\n#include &lt;string.h&gt;\n\nint main(int argc, char **argv) {\n  if (argc != 2) {\n    return 1;\n  }\n\n  char *example_str = argv[1];\n\n  char str1[64];\n  char str2[64];\n\n  strncpy(str1, example_str, 63);\n  strncpy(str2, example_str, 63);\n  str1[63] = &#39;\\0&#39;; // making sure of null byte at the end\n  str2[63] = &#39;\\0&#39;;\n}</pre>\n<p>Χρησιμοποιώντας:</p>\n<p></p>\n<pre>\ngcc -o jabbamaps jabbamaps.c -Wall -Wextra -pedantic -Werror -Ofast -m32</pre>\n<p></p>\n<p>Επίσης, ίσως μπορείς να χρησιμοποιήσεις sizeof(str1) - 1 αντί να χρειάζεται να αλλάζεις και τους τρεις αριθμούς κάθε φορά που αλλάζεις το μέγεθος του buffer.</p>"}],"type":"i_answer","tag_endorse_arr":[],"children":[],"id":"m5inkurp4l05ry","config":{"editor":"rte"},"is_tag_endorse":false},{"anon":"no","folders":[],"data":null,"no_upvotes":0,"subject":"Στο linux17, στο προσωπικό μου σύστημα μου έβγαζε αντίστοιχο error μέχρι να προσθέσω τα 2 τελευταία lines (str1[63] = ‘\\0’ κλπ), ύστερα ησύχασε.","created":"2025-01-04T20:48:29Z","bucket_order":4,"bucket_name":"Yesterday","type":"followup","tag_good":[],"uid":"m23al02i88m4tk","children":[{"anon":"no","folders":[],"data":null,"subject":"<p>Το βασικό πρόβλημα για το οποίο προσπαθεί να σε προειδοποιήσει ο μεταγλωττιστής είναι ότι η συνάρτηση strncpy <em>δεν</em> θα τοποθετήσει NULL byte μετά την αντιγραφή του string εάν αυτό δεν χωράει στον buffer το οποίο μπορεί να οδηγήσει σε προβλήματα αν στην συνέχεια δεν το μηδενίσεις ο ίδιος. Για παράδειγμα:</p>\n<p></p>\n<pre>\nthanassis@linux17:~$ cat badjabba.c \n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n\nint main() {\n  char *example_str = &#34;0123456789012345678901234567890123456789012345678901234567890123&#34;;\n\n  char str1[64];\n  char str2[64] = &#34;crazy huh?&#34;;\n\n    // Let&#39;s initialize str1 to be all &#39;A&#39; characters\n    for(unsigned i = 0; i &lt; sizeof(str1); i&#43;&#43;) {\n      str1[i] = &#39;A&#39;;\n    }\n\n  // Now let&#39;s overwrite it with a string with 64 characters &#43; null byte (won&#39;t fit)\n  strncpy(str1, example_str, sizeof(str1) - 1);\n\n  printf(&#34;Show me some numbers please: %s\\n&#34;, str1);\n  printf(&#34;How does this work? %s\\n&#34;, str2);\n}\nthanassis@linux17:~$ gcc -o badjabba badjabba.c -Wall -Wextra -pedantic -Werror\nthanassis@linux17:~$ ./badjabba \nShow me some numbers please: 012345678901234567890123456789012345678901234567890123456789012Acrazy huh?\nHow does this work? crazy huh?</pre>\n<p>Σου βγάζει νόημα το παραπάνω; Ρίξε του 1-2 ματιές.</p>","created":"2025-01-04T21:09:45Z","bucket_order":4,"bucket_name":"Yesterday","type":"feedback","tag_good":[],"uid":"llz2dt5jij45lu","children":[],"tag_good_arr":[],"id":"m5iogc06r4r5at","d-bucket":"Yesterday","updated":"2025-01-04T21:11:21Z","config":{"editor":"rte"}},{"anon":"no","folders":[],"data":null,"subject":"Αυτό που σου λέει το warning είναι ότι η strncpy δεν θα βάλει &#39;\\0&#39; αν αυτό δεν χωράει στο buffer που της δίνεις, οπότε το αποτέλεσμά της ενδέχεται να μην είναι string (γιατί δεν θα έχει \\0 στο τέλος)","created":"2025-01-04T21:10:03Z","bucket_order":4,"bucket_name":"Yesterday","type":"feedback","tag_good":[],"uid":"ln71y5aw8yv4sw","children":[],"tag_good_arr":[],"id":"m5iogprtbof5nb","d-bucket":"Yesterday","updated":"2025-01-04T21:10:03Z","config":{"editor":"rte"}},{"anon":"no","folders":[],"data":null,"subject":"Το καταλαβαίνω αυτό, και άρα η υλοποίηση μου δεν δημιουργεί αυτό το πρόβλημα εφόσον τελικά μηδενίζω τα strings μου. Το θέμα είναι ότι έτσι το πρόγραμμα μου δεν είναι αποδεκτό με βάση τις προδιαγραφές της άσκησης, καθώς παρουσιάζει error με αυτό το compiler command.","created":"2025-01-04T21:12:12Z","bucket_order":3,"bucket_name":"Today","type":"feedback","tag_good":[{"role":"student","name":"Maichosoglou Spyros","endorser":{},"admin":false,"photo":null,"id":"m1m1c0axk8w6w2","photo_url":null,"email":"sdi2400114@uoa.gr","us":false,"facebook_id":null}],"uid":"m23al02i88m4tk","children":[],"tag_good_arr":["m1m1c0axk8w6w2"],"id":"m5iojguxitb2bg","updated":"2025-01-05T00:04:01Z","config":{"editor":"plain"}},{"anon":"no","folders":[],"data":null,"subject":"<p>Η χρήση που κάνεις είναι διαφορετική μάλλον καθώς το παραπάνω πρόγραμμα δεν παρουσιάζει αυτό το warning ακόμα και χωρίς την προσθήκη των &#39;\\0&#39;.</p>\n<p></p>\n<p>Μόλις έριξα μια ματιά στο πρόγραμμά σου, νομίζω πως ο τρόπος που περνάς τα ορίσματα βρίσκει ένα corner case στον compiler όπου το warning είναι μειωμένης χρησιμότητας - ίσως και λάθος αλλά επειδή είναι αργά δεν μπορώ να σου πω με σιγουριά :)</p>\n<p></p>\n<p>Εφόσον ο στόχος σου είναι απλά να αντιγράψεις τα bytes από την μια δομή στην άλλη, μπορείς να δοκιμάσεις να χρησιμοποιήσεις την memcpy η οποία έχει αντίστοιχη σύνταξη αλλά λιγότερους περιορισμούς (και πάλι προσοχή φυσικά να μην βγούμε εκτός buffer).</p>","created":"2025-01-04T21:52:05Z","bucket_order":4,"bucket_name":"Yesterday","type":"feedback","tag_good":[{"role":"student","name":"Stefanos Bakogiannis","endorser":{},"admin":false,"photo":null,"id":"m23al02i88m4tk","photo_url":null,"email":"stefbakogiannis@gmail.com","us":false,"facebook_id":null}],"uid":"llz2dt5jij45lu","children":[],"tag_good_arr":["m23al02i88m4tk"],"id":"m5ipyrvl9si49l","d-bucket":"Yesterday","updated":"2025-01-04T23:36:26Z","config":{"editor":"rte"}}],"tag_good_arr":[],"no_answer":0,"id":"m5inozjzsy32db","d-bucket":"Yesterday","updated":"2025-01-04T21:52:05Z","config":{"editor":"plain"}}],"tag_good_arr":[],"no_answer":0,"anon_icons":true,"id":"m5ifqm2bk8u5qz","config":{"editor":"rte","has_emails_sent":1},"status":"active","drafts":{},"request_instructor":0,"request_instructor_me":false,"bookmarked":3,"num_favorites":1,"my_favorite":false,"is_bookmarked":true,"is_pinned":false,"is_tag_good":false,"q_edits":[],"i_edits":[],"s_edits":[],"t":1756372442781,"default_anonymity":"no"},"error":null,"aid":"mev6sya82v65w5"}